#!/bin/bash

# Output the header for the foot file.
foot-profile-header() {
  # Write out the header files
  echo "# DO NOT EDIT THIS FILE"
  echo "# Generated from dot profile. See the profile script for details"
  echo "# Active profiles: $*"
  echo ""
  echo ""
}

# Foot via foot.ini. In this case we have one ini file so we will need to concat
# different ini files in to one. Each foot profile can be defined with its own ini
# file called foot.profile_name.ini. Concating these in to one file called foot.ini
# will allow max flexability.
foot-profile() {
  foot-profile-header "$@"

  local current_script_location
  current_script_location="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
  local foot_profile_base_path="$current_script_location/../profiles/foot"

  # Loop over the provided active profiles
  for active_profile in "$@"; do
    local profile_file_path
    profile_file_path=$(realpath "$foot_profile_base_path/foot.$active_profile.ini")
    echo "# Generated from Profile $active_profile"
    echo "# $profile_file_path"
    cat "$profile_file_path"
    echo ""
    echo ""
  done
}
